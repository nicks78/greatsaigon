{"version":3,"sources":["webpack:///./components/search-bar/index.js?58b3"],"names":["SearchBar","getWhatList","category","dir","state","directories","array","i","length","slug","subdirectory","handleSelect","e","name","target","value","what","setState","where","drop_what","goToLink","href","as","Router","replace","shallow","directory","drop_where","StaticData","District","drop_directory","result","props","fetch","mode","then","response","json","data","filter","res","width","map","x","index","textTransform","toLowerCase","color","locales","search","React","Component"],"mappings":"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","file":"4.69b206ed50c6b71469b3.hot-update.js","sourcesContent":["import React from 'react'\nimport {connect} from 'react-redux'\nimport Page from '../page'\nimport {API_ENDPOINT} from '../../api/constant'\nimport StaticData from '../../static-data/static-data'\nimport locales from '../../locales/en.json'\nimport renderHTML from 'react-render-html';\nimport Router from 'next/router'\nimport SearchPage from '../../pages/search-page'\n// Component\nimport TagHolder from './tag-holder'\nimport Input from '../forms/input'\n\nclass SearchBar extends React.Component {\n\n  constructor() {\n\n    super()\n\n    this.state = {\n      what: '1',\n      where: '',\n      directory: '1',\n      drop_where: StaticData.District,\n      drop_what: [],\n      drop_directory: [],\n      result: [],\n      directories: []\n    }\n  }\n\n  componentWillMount(){\n    this.setState({\n      where: this.props.where || '',\n      what: this.props.what || '1',\n      directory: this.props.directory || '1'\n    })\n  }\n\n\n  componentDidMount(){\n    // NOT YET WORKING / TO BE FIXED \n    fetch(`${API_ENDPOINT}directories`, {\n      mode: 'cors'\n    })\n    .then( response => {\n      return response.json()\n    })\n    .then(data => {\n      var drop_directory = data.filter( (res) => { return res.slug })\n      this.setState({ \n        directories: data,\n        drop_directory: drop_directory,\n      }, () => {\n        this.setState({ drop_what: this.getWhatList(this.state.directory) })\n      })\n    })\n\n  }\n    \n    getWhatList = (category) => {\n\n      var dir = this.state.directories;\n      var array = [];\n\n      for(var i = 0 ; i < dir.length; i++){\n        if(category === dir[i].slug){\n            return array = dir[i].subdirectory           \n        }\n      }\n      return array;\n    }\n\n\n    handleSelect = (e) => {\n        var name = e.target.name;\n        var value = e.target.value;\n        var dir = name === 'directory' ? true : false\n\n        // Call function to update dropdown-select-what\n        if( dir ){\n          var what = this.getWhatList(value)\n          this.setState({\n              what: '1',\n              where: '1'\n          })\n        }\n\n        this.setState({ [name]: value, drop_what: dir ? what : this.state.drop_what })\n    }  \n\n    goToLink = (href, as) => {\n      Router.replace(href, as, {shallow: true})\n    }\n\n    render() {\n\n      const { where, what, directory, drop_where, drop_what, drop_directory, result } = this.state;\n\n\n      return (\n            \n              <div className=\"wrapper\">\n\n                  {/* CATEGORY */}\n\n                    <select name=\"directory\" className=\"uk-select select-directory\" onChange={ this.handleSelect } value={ directory } >\n                        <option value=\"1\" disabled style={{ width: \"100%\"}}>Bar/Restaurant/Nightlife ?</option>\n                          {\n                            drop_directory.map((x, index) => {\n                                return <option key={index} value={x.slug} style={{ textTransform: 'capitalize' }}>{x.name}\n                                </option>\n                            })\n                          }      \n                      </select>\n                      \n             \n                  {/* WHERE */}\n\n\n                    <select name=\"where\" className=\"uk-select\" onChange={ this.handleSelect } value={where}>\n                      <option value=\"1\" disabled>Where ?</option>\n                      {\n                        drop_where.map((x, index) => {\n                            return <option key={index} value={x.toLowerCase()} style={{ textTransform: 'capitalize' }}>{x}</option>\n                        })\n                      }\n                    </select>\n              \n                  {/* WHAT */}\n                \n                    <select name=\"what\" className=\"uk-select\" onChange={ this.handleSelect } value={what}>\n                      <option value=\"1\" disabled>What ?</option>\n                      {\n                        drop_what.map((x, index) => {\n                            return <option key={index} value={x.slug} style={{ textTransform: 'capitalize' }}>{x.name}</option>\n                        })\n                      }\n                    </select>\n                \n                  {/* SEARCH */}\n\n                <div className=\"search\">\n\n                    <div className=\"uk-inline\">\n                        <i className=\"uk-form-icon\"  className=\"uk-form-icon uk-form-icon-flip fas fa-search fa-lg\" style={{ color: 'white' }}></i>\n                        <input onClick={ () => { this.goToLink(\n                            `/search-page/?directory=${directory || 'food-and-drink' }/?where=${where || 'district-1'}/?what=${what || 'restaurant'}`,\n                            `/search-page/${directory || 'food-and-drink' }/${where || 'district-1'}/${what || 'restaurant'}`\n                        ) } } type=\"submit\" value={ locales.search } className=\"submit uk-input\" />\n                    </div>\n                </div>\n                  <style jsx global>{`\n                    body { \n                      margin: 0px;\n                    }\n                    .wrapper {\n                      display: flex;\n                      position: relative;\n                      left: 25%;\n                      box-shadow: 8px 8px 20px 8px rgba(0,0,0,0.2);\n                      border-radius: 25px;\n                      background-color: none;\n                      width: 50%;\n                    }\n                    .uk-input{\n                      height: 50px;\n                    }\n                    .uk-select {\n                      height: 50px !important;         \n                    }\n                    .fas {\n                      display: inline-flex;\n                    }\n                    .search input {\n                      color: white;\n                      background-color: #f50633;\n                      border-color: red;  \n                    }\n                    .search input:hover, .search input:focus {\n                      background-color: #f6a406;\n                      border-color: #f6a406;\n                      cursor: pointer;\n                    }\n\n                    @media(max-width: 960px){\n                      .wrapper {\n                        width: 100%;\n                        left: 0%;\n                        margin-top: 5px;\n                        display: grid;\n                        grid-template-columns: 1fr;\n                      }\n                      .submit {\n                        border-bottom-right-radius: 0px;\n                        border-top-right-radius: 0px;                \n                      }\n                      .select-directory {\n                        border-bottom-left-radius: 0px;\n                        border-top-left-radius: 0px;                \n                      }\n                      .uk-grid-margin {\n                        margin-top: 0px;\n                      }\n                      .search .uk-inline{\n                        width: 100%;\n                      }\n                    }\n\n                    @media(min-width: 960px) {\n                      .wrapper .uk-inline:nth-child(2),\n                      .wrapper .uk-inline:nth-child(3) {\n                          padding-left: 1px;\n                      }\n                      .select-directory {\n                        border-bottom-left-radius: 24px;\n                        border-top-left-radius: 24px;                \n                      }\n                      .submit {\n                        border-bottom-right-radius: 24px;\n                        border-top-right-radius: 24px;              \n                      }\n                      .search {\n                        padding-left: 0px;\n                      }\n                    }\n                  `}</style>\n          </div>  \n      )\n    }\n}\n\n\nexport default SearchBar;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./components/search-bar/index.js"],"sourceRoot":""}