{"version":3,"sources":["webpack:///./pages/search-page.js?b98f"],"names":["SearchPage","handleFilterButtons","filterIcons","event","target","getAttribute","valueInput","value","apiFilters","state","directory","axios","get","then","result","response","data","forEach","req","options","beauty","hair","treatment","res","stockResult","unshift","nails","spa","setState","_","uniq","catch","error","console","log","what","where","next","prev","page","isToggle","props","url","query","api","getList","nextProps","list","isFecthing","drop_what","height","overflow","status","map","x","index","marginBottom","msg","zIndex","React","Component","mapStateToProps","dataReducer","mapDispatchToProps","dispatch","Page","connect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEMA,U;;;AACJ,wBAAc;AAAA;;AAAA;;AAAA,UAyDdC,mBAzDc,GAyDQ,iBAAS;AAC7B,UAAIC,cAAcC,MAAMC,MAAN,CAAaC,YAAb,CAA0B,MAA1B,CAAlB;AACA,UAAIC,aAAaH,MAAMC,MAAN,CAAaG,KAA9B;AACA,UAAIC,wEACF,MAAKC,KAAL,CAAWC,SADT,YAAJ;AAGAC,MAAA,8CAAAA,CACGC,GADH,CACOJ,UADP,EAEGK,IAFH,CAEQ,oBAAY;AAChB,YAAIC,eAAJ;;AAEAC,iBAASC,IAAT,CAAcC,OAAd,CAAsB,eAAO;AAC3B,cAAIf,gBAAgB,MAApB,EAA4B;AAC1B,gBAAIgB,IAAIC,OAAJ,CAAYC,MAAZ,CAAmBC,IAAnB,CAAwBC,SAAxB,KAAsC,GAA1C,EAA+C;AAC7CJ,kBAAIC,OAAJ,CAAYC,MAAZ,CAAmBC,IAAnB,CAAwBC,SAAxB,CAAkCL,OAAlC,CAA0C,eAAO;AAC/C,oBAAIM,QAAQjB,UAAZ,EAAwB;AACtBQ,2BAASI,GAAT;AACA,wBAAKT,KAAL,CAAWe,WAAX,CAAuBC,OAAvB,CAA+BX,MAA/B;AACD;AACF,eALD;AAMD;AACF,WATD,MASO,IAAIZ,gBAAgB,OAApB,EAA6B;AAClC,gBAAIgB,IAAIC,OAAJ,CAAYC,MAAZ,CAAmBM,KAAnB,CAAyBJ,SAAzB,KAAuC,GAA3C,EAAgD;AAC9CJ,kBAAIC,OAAJ,CAAYC,MAAZ,CAAmBM,KAAnB,CAAyBJ,SAAzB,CAAmCL,OAAnC,CAA2C,eAAO;AAChD,oBAAIM,QAAQjB,UAAZ,EAAwB;AACtBQ,2BAASI,GAAT;AACA,wBAAKT,KAAL,CAAWe,WAAX,CAAuBC,OAAvB,CAA+BX,MAA/B;AACD;AACF,eALD;AAMD;AACF,WATM,MASA,IAAIZ,gBAAgB,eAApB,EAAqC;AAC1C,gBAAIgB,IAAIC,OAAJ,CAAYC,MAAZ,CAAmBO,GAAnB,CAAuBL,SAAvB,KAAqC,GAAzC,EAA8C;AAC5CJ,kBAAIC,OAAJ,CAAYC,MAAZ,CAAmBO,GAAnB,CAAuBL,SAAvB,CAAiCL,OAAjC,CAAyC,eAAO;AAC9C,oBAAIM,QAAQjB,UAAZ,EAAwB;AACtBQ,2BAASI,GAAT;AACA,wBAAKT,KAAL,CAAWe,WAAX,CAAuBC,OAAvB,CAA+BX,MAA/B;AACD;AACF,eALD;AAMD;AACF;AACF,SA7BD;;AA+BA,cAAKc,QAAL,CAAc;AACZd,kBAAQ,+CAAAe,CAAEC,IAAF,CAAO,MAAKrB,KAAL,CAAWe,WAAlB;AADI,SAAd;AAGD,OAvCH,EAwCGO,KAxCH,CAwCS,UAASC,KAAT,EAAgB;AACrBC,gBAAQC,GAAR,CAAYF,KAAZ;AACD,OA1CH;AA2CD,KA1Ga;;AAGZ,UAAKvB,KAAL,GAAa;AACX0B,YAAM,GADK;AAEXC,aAAO,EAFI;AAGX1B,iBAAW,GAHA;AAIX2B,YAAM,EAJK;AAKXC,YAAM,CALK;AAMXC,YAAM,CANK;AAOXC,gBAAU,KAPC;AAQXhB,mBAAa,EARF;AASXV,cAAQ;AATG,KAAb;AAHY;AAcb;;;;yCAEoB;AAAA;;AACnB,UAAI,KAAK2B,KAAL,CAAWC,GAAf,EACE,KAAKd,QAAL,CAAc;AACZQ,eAAO,KAAKK,KAAL,CAAWC,GAAX,CAAeC,KAAf,CAAqBP,KADhB;AAEZD,cAAM,KAAKM,KAAL,CAAWC,GAAX,CAAeC,KAAf,CAAqBR,IAFf;AAGZzB,mBAAW,KAAK+B,KAAL,CAAWC,GAAX,CAAeC,KAAf,CAAqBjC;AAHpB,OAAd,EAIG,YAAM;AACPuB,gBAAQC,GAAR,CAAY,SAAZ,EAAuB,OAAKzB,KAAL,CAAW2B,KAAlC;AACA,YAAIQ,gDACF,OAAKnC,KAAL,CAAW0B,IADT,mBAEU,OAAK1B,KAAL,CAAWC,SAFrB,eAEwC,OAAKD,KAAL,CAAW2B,KAFvD;AAGA,eAAKK,KAAL,CAAWI,OAAX,CAAmBD,GAAnB;AACD,OAVD;AAWH;;;wCAEmB;AAAA;;AAClB,UAAI,KAAKH,KAAL,CAAWC,GAAf,EACE,KAAKd,QAAL,CAAc;AACZQ,eAAO,KAAKK,KAAL,CAAWC,GAAX,CAAeC,KAAf,CAAqBP,KADhB;AAEZD,cAAM,KAAKM,KAAL,CAAWC,GAAX,CAAeC,KAAf,CAAqBR,IAFf;AAGZzB,mBAAW,KAAK+B,KAAL,CAAWC,GAAX,CAAeC,KAAf,CAAqBjC;AAHpB,OAAd,EAIG,YAAM;AACPuB,gBAAQC,GAAR,CAAY,SAAZ,EAAuB,OAAKzB,KAAL,CAAW2B,KAAlC;AACA,YAAIQ,gDACF,OAAKnC,KAAL,CAAW0B,IADT,mBAEU,OAAK1B,KAAL,CAAWC,SAFrB,eAEwC,OAAKD,KAAL,CAAW2B,KAFvD;AAGA,eAAKK,KAAL,CAAWI,OAAX,CAAmBD,GAAnB;AACD,OAVD;AAWH;;;0CAEoB,CAEpB;;;8CAEyBE,S,EAAW;AACnC,UAAIA,UAAUJ,GAAd,EACE,KAAKd,QAAL,CAAc;AACZd,gBAAQgC,UAAUhC,MAAV,CAAiBiC;AADb,OAAd;AAGH;;;6BAqDQ;AACPd,cAAQC,GAAR,CAAY,KAAKzB,KAAL,CAAWe,WAAvB;AACA,UAAI,KAAKiB,KAAL,CAAW3B,MAAX,CAAkBkC,UAAtB,EAAkC;AAChC,eAAO,4DAAC,oEAAD;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACD,UAAI,CAAC,KAAKvC,KAAL,CAAW2B,KAAZ,IAAqB,CAAC,KAAK3B,KAAL,CAAW0B,IAAjC,IAAyC,CAAC,KAAK1B,KAAL,CAAWC,SAAzD,EAAoE;AAClE,eAAO,4DAAC,oEAAD;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACDuB,cAAQC,GAAR,CAAY,OAAZ,EAAqB,KAAKzB,KAAL,CAAW2B,KAAhC;AARO,mBAS+C,KAAK3B,KATpD;AAAA,UASC2B,KATD,UASCA,KATD;AAAA,UASQD,IATR,UASQA,IATR;AAAA,UASczB,SATd,UAScA,SATd;AAAA,UASyBI,MATzB,UASyBA,MATzB;AAAA,UASiCmC,SATjC,UASiCA,SATjC;;;AAWP,aACE;AAAC,2EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA;AAAA,gDAAe,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,sEAAC,uEAAD,IAAW,MAAMd,IAAjB,EAAuB,OAAOC,KAA9B,EAAqC,WAAW1B,SAAhD;AAAA;AAAA;AAAA;AAAA;AADF,SADF;AAKE;AAAA;AAAA;AAAA,gDAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACE;AAAA;AAAA,cAAK,oBAAL;AAAA;AAAA;AAAA;AAAA;AAAA;AACG,iBAAKD,KAAL,CAAWC,SAAX,KAAyB,QAAzB,IACC;AAAA;AAAA;AAAA,oDAAe,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,0EAAC,2EAAD,IAAQ,SAAS,KAAKT,mBAAtB;AAAA;AAAA;AAAA;AAAA;AADF,aAFJ;AAME;AAAA;AAAA;AACE,uBAAO;AACLiD,0BAAQ,OADH;AAELC,4BAAU;AAFL,iBADT;AAAA,oDAKY,qCALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAOG,eAACrC,OAAOsC,MAAR,GACCtC,OAAOuC,GAAP,CAAW,UAACC,CAAD,EAAIC,KAAJ,EAAc;AACvB,uBACE;AAAA;AAAA,oBAAK,KAAKA,KAAV,EAAiB,OAAO,EAAEC,cAAc,MAAhB,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,8EAAC,6EAAD,IAAW,OAAOF,CAAlB;AAAA;AAAA;AAAA;AAAA;AADF,iBADF;AAKD,eAND,CADD,GASC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAIxC,uBAAO2C;AAAX;AAhBJ,aANF;AA0BE;AAAA;AAAA;AACE,uBAAO,EAAEC,QAAQ,KAAV,EADT;AAEE,oBAAG,KAFL;;AAIE,qCAAkB,8CAJpB;AAAA,oDAGY,gBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAMG,eAAC5C,OAAOsC,MAAR,GAAiB,4DAAC,gEAAD,IAAK,QAAQtC,MAAb,EAAqB,UAAU,KAA/B;AAAA;AAAA;AAAA;AAAA,gBAAjB,GAA4D;AAN/D;AA1BF;AADF,SALF;AAAA;AAAA;AAAA;AAAA;AAAA,OADF;AA6ED;;;;;;;;;EArMsB,6CAAA6C,CAAMC,S;;AAwM/B;;;AACA,IAAMC,kBAAkB,SAAlBA,eAAkB,QAAS;AAC/B,SAAO;AACL/C,YAAQL,MAAMqD;AADT,GAAP;AAGD,CAJD;;AAMA;AACA,IAAMC,qBAAqB,SAArBA,kBAAqB,WAAY;AACrC,SAAO;AACLlB,aAAS;AAAA,aAAOmB,SAAS,4EAAAnB,CAAQD,GAAR,CAAT,CAAP;AAAA;AADJ,GAAP;AAGD,CAJD;;eAMe,yEAAAqB,CACb,oEAAAC,CACEL,eADF,EAEEE,kBAFF,EAGE/D,UAHF,CADa,C;;AAAf;;;;;;;;;;;;0BAtNMA,U;0BAyMA6D,e;0BAOAE,kB","file":"4.2a1ed16064be730ec448.hot-update.js","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport Layout from \"../components/layout\";\nimport { getList } from \"../redux/data/actions\";\nimport SearchBar from \"../components/search-bar\";\nimport Map from \"../components/map\";\nimport CardVenue from \"../components/cards/card-venue\";\nimport Filter from \"../components/filters/filter\";\nimport Page from \"../components/page\";\nimport Loader from \"../components/loader\";\nimport axios from \"axios\";\nimport _ from \"lodash\";\n\nclass SearchPage extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      what: \"1\",\n      where: \"\",\n      directory: \"1\",\n      next: 10,\n      prev: 0,\n      page: 1,\n      isToggle: false,\n      stockResult: [],\n      result: []\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.url)\n      this.setState({\n        where: this.props.url.query.where,\n        what: this.props.url.query.what,\n        directory: this.props.url.query.directory\n      }, () => {\n        console.log('WHERE-1', this.state.where)\n        var api = `venues/search?items=1000&page=1&what=${\n          this.state.what\n        }&directory=${this.state.directory}&where=${this.state.where}`;\n        this.props.getList(api);\n      });\n  }\n\n  componentDidMount() {\n    if (this.props.url)\n      this.setState({\n        where: this.props.url.query.where,\n        what: this.props.url.query.what,\n        directory: this.props.url.query.directory\n      }, () => {\n        console.log('WHERE-2', this.state.where)\n        var api = `venues/search?items=1000&page=1&what=${\n          this.state.what\n        }&directory=${this.state.directory}&where=${this.state.where}`;\n        this.props.getList(api);\n      });\n  }\n\n  componentWillUpdate(){\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.url)\n      this.setState({\n        result: nextProps.result.list\n      });\n  }\n\n  handleFilterButtons = event => {\n    var filterIcons = event.target.getAttribute(\"name\");\n    var valueInput = event.target.value;\n    var apiFilters = `https://backend.greatsaigon.com/api/v1/en/directories/${\n      this.state.directory\n    }/venues`;\n    axios\n      .get(apiFilters)\n      .then(response => {\n        let result;\n\n        response.data.forEach(req => {\n          if (filterIcons === \"Hair\") {\n            if (req.options.beauty.hair.treatment !== \"0\") {\n              req.options.beauty.hair.treatment.forEach(res => {\n                if (res === valueInput) {\n                  result = req;\n                  this.state.stockResult.unshift(result);\n                }\n              });\n            }\n          } else if (filterIcons === \"Nails\") {\n            if (req.options.beauty.nails.treatment !== \"0\") {\n              req.options.beauty.nails.treatment.forEach(res => {\n                if (res === valueInput) {\n                  result = req;\n                  this.state.stockResult.unshift(result);\n                }\n              });\n            }\n          } else if (filterIcons === \"Spa & Massage\") {\n            if (req.options.beauty.spa.treatment !== \"0\") {\n              req.options.beauty.spa.treatment.forEach(res => {\n                if (res === valueInput) {\n                  result = req;\n                  this.state.stockResult.unshift(result);\n                }\n              });\n            }\n          }\n        });\n\n        this.setState({\n          result: _.uniq(this.state.stockResult)\n        });\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  };\n\n  render() {\n    console.log(this.state.stockResult);\n    if (this.props.result.isFecthing) {\n      return <Loader />;\n    }\n    if (!this.state.where || !this.state.what || !this.state.directory) {\n      return <Loader />;\n    }\n    console.log('WHERE', this.state.where)\n    const { where, what, directory, result, drop_what } = this.state;\n\n    return (\n      <Layout>\n        <div className=\"wrapper-search-bar\">\n          <SearchBar what={what} where={where} directory={directory} />\n        </div>\n\n        <div className=\"content\">\n          <div data-uk-grid>\n            {this.state.directory === \"beauty\" && (\n              <div className=\"uk-width-auto@m\">\n                <Filter onClick={this.handleFilterButtons} />\n              </div>\n            )}\n            <div\n              style={{\n                height: \"100vh\",\n                overflow: \"auto\"\n              }}\n              className=\"gs-scroll-section uk-width-expand@m\"\n            >\n              {!result.status ? (\n                result.map((x, index) => {\n                  return (\n                    <div key={index} style={{ marginBottom: \"10px\" }}>\n                      <CardVenue venue={x} />\n                    </div>\n                  );\n                })\n              ) : (\n                <p>{result.msg}</p>\n              )}\n            </div>\n\n            <div\n              style={{ zIndex: \"980\" }}\n              id=\"map\"\n              className=\"uk-width-1-3@m\"\n              data-uk-scrollspy=\"cls: uk-animation-slide-right; repeat: false\"\n            >\n              {!result.status ? <Map result={result} isSingle={false} /> : null}\n            </div>\n          </div>\n        </div>\n        <style jsx global>\n          {`\n            .content {\n              background-color: #f1f1f2;\n              border-bottom: 1px solid #d0d2d3;\n              margin: 1em auto;\n              max-width: 100% !important;\n            }\n            .filters_icon {\n              display: grid;\n              grid-template-columns: repeat(2, 1fr);\n            }\n            .fas {\n              cursor: pointer;\n            }\n            #map {\n              height: 100vh;\n            }\n            @media (max-width: 960px) {\n              .content {\n                margin: 0 auto;\n                width: 100%;\n              }\n              #map {\n                display: none !important;\n              }\n              .gs-scroll-section {\n                overflow: ;\n              }\n            }\n          `}\n        </style>\n      </Layout>\n    );\n  }\n}\n\n// Get all data for child components\nconst mapStateToProps = state => {\n  return {\n    result: state.dataReducer\n  };\n};\n\n// Get all data for child components\nconst mapDispatchToProps = dispatch => {\n  return {\n    getList: api => dispatch(getList(api))\n  };\n};\n\nexport default Page(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(SearchPage)\n);\n\n\n\n// WEBPACK FOOTER //\n// ./pages/search-page.js"],"sourceRoot":""}